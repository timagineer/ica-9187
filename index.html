<!DOCTYPE html>
<html lang="en" ng-app="chartApp">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICANotes+ Functional Prototypes: DO-9187</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>
    <style>
        :root {
            --primary: hsl(222, 47%, 31%);
            --primary-hover: hsl(222, 47%, 25%);
            --bg: hsl(222, 40%, 98%);
            --border: hsl(222, 27%, 84%);
            --error: hsl(0, 84%, 60%);
            --text: hsl(222, 47%, 11%);
            --muted: hsl(222, 19%, 35%);
            accent-color: var(--primary)
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box
        }

        html {
            scroll-behavior: smooth;
            scrollbar-gutter: stable;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 14px;
            background: var(--bg);
            padding: 20px;
        }

        .demo {
            max-width: 420px;
            margin: 0 auto 20px;
            background: #fff;
            padding: 32px;
            border-radius: 8px;
            border: 1px solid #e2e8f0
        }

        .demo h2 {
            font-size: 16px;
            margin-bottom: 24px;
            text-align: center
        }

        .toggles {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            max-width: 360px;
            margin: 0 auto
        }

        @media(max-width:480px) {
            .toggles {
                grid-template-columns: 1fr
            }
        }

        .toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--muted);
            text-align: left
        }

        .toggle input {
            width: 16px;
            height: 16px;
            cursor: pointer
        }

        .launch {
            display: block;
            margin: 24px auto 0;
            padding: 12px 24px;
            background: var(--primary);
            color: #fff;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer
        }

        .launch:hover {
            background: var(--primary-hover)
        }

        dialog {
            border: none;
            border-radius: 8px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, .1);
            margin: auto !important;
            padding: 0;
            max-width: 50rem;
            width: calc(100% - 2rem);
            opacity: 0;
            transform: translateY(5px) scale(.99);
            transition: opacity 240ms, transform 240ms ease-out;
        }

        dialog[open].animate-in {
            opacity: 1;
            transform: none
        }

        dialog.closing {
            opacity: 0;
            transform: translateY(5px) scale(.99)
        }

        dialog::backdrop {
            background: rgba(0, 0, 0, .2);
            transition: opacity 240ms;
        }

        dialog:not(.animate-in)::backdrop {
            opacity: 0;
        }

        dialog.animate-in::backdrop {
            opacity: 1;
        }

        dialog.closing::backdrop {
            opacity: 0;
        }

        .m-head {
            background: var(--primary);
            color: #fff;
            padding: 16px 24px;
            border-radius: 8px 8px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center
        }

        .m-head h3 {
            font-size: 16px
        }

        .m-head button {
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
            padding: 12px;
            margin: -12px -16px -12px 0;
            /* Negative margin to maintain visual alignment */
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: background-color 200ms;
        }

        .m-head button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .m-head button:active {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .m-body {
            padding: 24px;
            max-height: calc(100vh - 250px);
            overflow-y: auto;
            scrollbar-gutter: stable;
        }

        .sec {
            margin-bottom: 28px
        }

        .sec:last-child {
            margin-bottom: 0
        }

        .sec-head {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 14px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 13px;
            font-weight: 600
        }

        .chk {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            color: var(--muted)
        }

        .chk input {
            width: 16px;
            height: 16px;
            cursor: pointer
        }

        input[type="date"]::placeholder {
            text-transform: uppercase;
        }

        input[type="date"]::-webkit-datetime-edit-text,
        input[type="date"]::-webkit-datetime-edit-month-field,
        input[type="date"]::-webkit-datetime-edit-day-field,
        input[type="date"]::-webkit-datetime-edit-year-field {
            text-transform: uppercase;
        }

        .collapse {
            --ease-in-out-sine: cubic-bezier(0.37, 0, 0.63, 1);
            display: grid;
            grid-template-rows: 1fr;
            transition:
                grid-template-rows 600ms var(--ease-in-out-sine),
                opacity 420ms,
                margin 600ms var(--ease-in-out-sine);
            opacity: 1;
        }

        .collapse.hide {
            grid-template-rows: 0fr;
            opacity: 0;
            margin-bottom: 0 !important;
        }

        .collapse>.inner {
            overflow: hidden;
            /* This ensures smooth height calculation */
            min-height: 0;
        }

        .collapse.no-transition {
            transition: none !important;
        }

        .row {
            display: grid;
            gap: 16px;
            margin-bottom: 14px
        }

        .row:last-child {
            margin-bottom: 0
        }

        .c2 {
            grid-template-columns: 1fr 1fr
        }

        .c3 {
            grid-template-columns: 1fr 1fr 1fr
        }

        .grp {
            display: flex;
            flex-direction: column;
            gap: 5px
        }

        .grp label {
            font-size: 13px;
            font-weight: 500;
            color: var(--muted)
        }

        .grp .req {
            color: var(--error)
        }

        .ctrl {
            height: 40px;
            padding: 0 12px;
            font-size: 14px;
            border: 1px solid var(--border);
            border-radius: 6px;
            background: #fff;
            width: 100%;
            min-width: 0;
        }

        .ctrl:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(15, 23, 42, .1)
        }

        .ctrl.err {
            border-color: var(--error)
        }

        select.ctrl {
            appearance: none;
            padding-right: 32px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8'%3E%3Cpath d='M1 1.5L6 6.5L11 1.5' stroke='%23475569' stroke-width='1.5' fill='none'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            cursor: pointer;
            width: 100%;
            min-width: 0;
        }

        .err-msg {
            color: var(--error);
            font-size: 12px
        }

        .m-foot {
            padding: 16px 24px;
            background: var(--bg);
            border-top: 1px solid #e2e8f0;
            border-radius: 0 0 8px 8px;
            display: flex;
            justify-content: flex-end;
            gap: 12px
        }

        .btn {
            height: 40px;
            padding: 0 20px;
            font-size: 14px;
            font-weight: 500;
            border-radius: 6px;
            border: none;
            cursor: pointer
        }

        .btn-sec {
            background: #fff;
            color: var(--muted);
            border: 1px solid var(--border)
        }

        .btn-pri {
            background: var(--primary);
            color: #fff
        }

        .btn-pri:hover {
            background: var(--primary-hover)
        }

        @media(max-width:640px) {

            .c2,
            .c3 {
                grid-template-columns: 1fr
            }
        }
    </style>
</head>

<body ng-controller="ChartCtrl as vm">
    <div class="demo">
        <h2>Required Fields Simulation</h2>
        <div class="toggles">
            <label class="toggle"><input type="checkbox" ng-model="vm.cfg.ssn">SSN</label>
            <label class="toggle"><input type="checkbox" ng-model="vm.cfg.race">Race</label>
            <label class="toggle"><input type="checkbox" ng-model="vm.cfg.ethnicity">Ethnicity</label>
            <label class="toggle"><input type="checkbox" ng-model="vm.cfg.marital">Marital Status</label>
            <label class="toggle"><input type="checkbox" ng-model="vm.cfg.disability">Disability</label>
            <label class="toggle"><input type="checkbox" ng-model="vm.cfg.family">Family Size</label>
            <label class="toggle"><input type="checkbox" ng-model="vm.cfg.employment">Employment Status</label>
            <label class="toggle"><input type="checkbox" ng-model="vm.cfg.income">Income Range</label>
            <label class="toggle"><input type="checkbox" ng-model="vm.cfg.email">Email</label>
            <label class="toggle"><input type="checkbox" ng-model="vm.cfg.phone">Phone</label>
            <label class="toggle"><input type="checkbox" ng-model="vm.cfg.address">Address</label>
            <label class="toggle"><input type="checkbox" ng-model="vm.cfg.emergency">Emergency Contact</label>
        </div>
        <button class="launch" ng-click="vm.open()">Create New Chart</button>
    </div>
    <dialog id="dlg">
        <div class="m-head">
            <h3>Create New Chart</h3>
            <button ng-click="vm.close()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12" />
                </svg></button>
        </div>
        <div class="m-body">
            <div class="sec">
                <div class="sec-head"><span>Client Details</span><label class="chk"><input type="checkbox" ng-model="vm.f.quick">Quick chart</label></div>
                <div class="row c3">
                    <div class="grp"><label for="firstName">Legal First Name<span class="req">*</span></label><input id="firstName" class="ctrl" ng-model="vm.f.firstName" ng-class="{err:vm.e.firstName}">
                        <div class="err-msg" ng-if="vm.e.firstName">{{vm.e.firstName}}</div>
                    </div>
                    <div class="grp"><label for="lastName">Legal Last Name<span class="req">*</span></label><input id="lastName" class="ctrl" ng-model="vm.f.lastName" ng-class="{err:vm.e.lastName}">
                        <div class="err-msg" ng-if="vm.e.lastName">{{vm.e.lastName}}</div>
                    </div>
                    <div class="grp"><label for="name">Name<span class="req">*</span></label><input id="name" class="ctrl" ng-model="vm.f.name" ng-class="{err:vm.e.name}">
                        <div class="err-msg" ng-if="vm.e.name">{{vm.e.name}}</div>
                    </div>
                </div>
                <div class="row c3">
                    <div class="grp"><label for="dob">Date of Birth<span class="req">*</span></label><input id="dob" type="date" class="ctrl" ng-model="vm.f.dob" ng-class="{err:vm.e.dob}">
                        <div class="err-msg" ng-if="vm.e.dob">{{vm.e.dob}}</div>
                    </div>
                    <div class="grp"><label for="sex">Legal Sex<span class="req">*</span></label><select id="sex" class="ctrl" ng-model="vm.f.sex" ng-class="{err:vm.e.sex}">
                            <option value="">Select...</option>
                            <option>Male</option>
                            <option>Female</option>
                            <option>Unknown</option>
                        </select>
                        <div class="err-msg" ng-if="vm.e.sex">{{vm.e.sex}}</div>
                    </div>
                    <div class="grp"><label for="gender">Gender<span class="req">*</span></label><select id="gender" class="ctrl" ng-model="vm.f.gender" ng-class="{err:vm.e.gender}">
                            <option value="">Select...</option>
                            <option>Male</option>
                            <option>Female</option>
                            <option>Female-to-Male (FTM)/Transgender Male/Trans Man</option>
                            <option>Male-to-Female (MTF)/Transgender Female/Trans Woman</option>
                            <option>Identifies as non-conforming gender</option>
                            <option>Additional gender category or other, please specify</option>
                            <option>Choose not to disclose</option>
                        </select>
                        <div class="err-msg" ng-if="vm.e.gender">{{vm.e.gender}}</div>
                    </div>
                </div>
                <div class="collapse" ng-class="{'hide':vm.f.quick}">
                    <div class="inner">
                        <div class="row c2">
                            <div class="grp"><label for="race">Race<span class="req" ng-if="vm.cfg.race">*</span></label><select id="race" class="ctrl" ng-model="vm.f.race" ng-class="{err:vm.e.race}">
                                    <option value="">Select...</option>
                                    <option>Asian</option>
                                    <option>Black or African American</option>
                                    <option>Declined to Specify</option>
                                    <option>Native Hawaiian or Other Pacific Islander</option>
                                    <option>Unknown</option>
                                    <option>White</option>
                                </select>
                                <div class="err-msg" ng-if="vm.e.race">{{vm.e.race}}</div>
                            </div>
                            <div class="grp"><label for="ethnicity">Ethnicity<span class="req" ng-if="vm.cfg.ethnicity">*</span></label><select id="ethnicity" class="ctrl" ng-model="vm.f.ethnicity" ng-class="{err:vm.e.ethnicity}">
                                    <option value="">Select...</option>
                                    <option>African-American</option>
                                    <option>African-Caribbean</option>
                                    <option>American Indian</option>
                                    <option>Arab-American</option>
                                    <option>ArmenianAmerican</option>
                                    <option>Asian-American</option>
                                    <option>Bangladeshi</option>
                                    <option>Biracial American</option>
                                    <option>Brazilian</option>
                                    <option>Canadian</option>
                                    <option>Caribbean</option>
                                    <option>Caucasian</option>
                                    <option>Central American</option>
                                    <option>Central European</option>
                                    <option>Chamorro</option>
                                    <option>Chinese</option>
                                    <option>Chinese-American</option>
                                    <option>Colombian</option>
                                    <option>Creole</option>
                                    <option>Danish</option>
                                    <option>Declined to Specify</option>
                                    <option>Dominican</option>
                                    <option>Ecuadorian</option>
                                    <option>Eurasian</option>
                                    <option>Filipino</option>
                                    <option>Filipino-American</option>
                                    <option>French</option>
                                    <option>German-American</option>
                                    <option>Greek-American</option>
                                    <option>Haitian</option>
                                    <option>Hawaiian</option>
                                    <option>Hispanic or Latino</option>
                                    <option>Hungarian</option>
                                    <option>Indian</option>
                                    <option>Iranian</option>
                                    <option>Irish-American</option>
                                    <option>Israeli</option>
                                    <option>Italian-American</option>
                                    <option>Japanese-American</option>
                                    <option>Jewish-American</option>
                                    <option>Jewish-Moroccan</option>
                                    <option>Korean</option>
                                    <option>Latin American</option>
                                    <option>Latino</option>
                                    <option>Lebanese</option>
                                    <option>Mexican</option>
                                    <option>Middle Eastern</option>
                                    <option>Mixed Racial American</option>
                                    <option>Native Alaskan</option>
                                    <option>Native American</option>
                                    <option>Not Hispanic or Latino</option>
                                    <option>Pacific Islander</option>
                                    <option>Pakistani</option>
                                    <option>Persian</option>
                                    <option>Persian-English</option>
                                    <option>Peruvian</option>
                                    <option>Polish-American</option>
                                    <option>Portuguese</option>
                                    <option>Puerto Rican</option>
                                    <option>Romanian/Venezuelan</option>
                                    <option>Russian</option>
                                    <option>Swedish</option>
                                    <option>Syrian</option>
                                    <option>Thai</option>
                                    <option>Turkish</option>
                                    <option>Unknown</option>
                                    <option>Vietnamese</option>
                                </select>
                                <div class="err-msg" ng-if="vm.e.ethnicity">{{vm.e.ethnicity}}</div>
                            </div>
                        </div>
                        <div class="row c2">
                            <div class="grp"><label for="marital">Marital Status<span class="req" ng-if="vm.cfg.marital">*</span></label><select id="marital" class="ctrl" ng-model="vm.f.marital" ng-class="{err:vm.e.marital}">
                                    <option value="">Select...</option>
                                    <option>Declined to specify</option>
                                    <option>Divorced</option>
                                    <option>Domestic Partner</option>
                                    <option>Engaged</option>
                                    <option>Married</option>
                                    <option>Never Married</option>
                                    <option>Separated</option>
                                    <option>Single</option>
                                    <option>Unknown</option>
                                    <option>Widowed</option>
                                </select>
                                <div class="err-msg" ng-if="vm.e.marital">{{vm.e.marital}}</div>
                            </div>
                            <div class="grp"><label for="disability">Disability<span class="req" ng-if="vm.cfg.disability">*</span></label><select id="disability" class="ctrl" ng-model="vm.f.disability" ng-class="{err:vm.e.disability}">
                                    <option value="">Select...</option>
                                    <option>None</option>
                                    <option>Blind</option>
                                    <option>Deaf</option>
                                    <option>Developmental Disability</option>
                                    <option>Hard of Hearing</option>
                                    <option>Intellectual Disability</option>
                                    <option>Legally Blind</option>
                                    <option>Unknown</option>
                                </select>
                                <div class="err-msg" ng-if="vm.e.disability">{{vm.e.disability}}</div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="grp"><label for="ssn">SSN<span class="req" ng-if="vm.cfg.ssn">*</span></label><input id="ssn" class="ctrl" ng-model="vm.f.ssn" ng-class="{err:vm.e.ssn}" placeholder="XXX-XX-XXXX">
                                <div class="err-msg" ng-if="vm.e.ssn">{{vm.e.ssn}}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="collapse sec" ng-class="{'hide':vm.f.quick}">
                <div class="inner">
                    <div class="sec-head"><span>Contact Information</span><label class="chk"><input type="checkbox" ng-model="vm.f.homeless">Client is homeless</label></div>
                    <div class="row c2">
                        <div class="grp"><label for="email">Email<span class="req" ng-if="vm.cfg.email&&!vm.f.homeless">*</span></label><input id="email" type="email" class="ctrl" ng-model="vm.f.email" ng-class="{err:vm.e.email}">
                            <div class="err-msg" ng-if="vm.e.email">{{vm.e.email}}</div>
                        </div>
                        <div class="grp"><label for="phone">Phone<span class="req" ng-if="vm.cfg.phone&&!vm.f.homeless">*</span></label><input id="phone" class="ctrl" ng-model="vm.f.phone" ng-class="{err:vm.e.phone}" placeholder="(XXX) XXX-XXXX">
                            <div class="err-msg" ng-if="vm.e.phone">{{vm.e.phone}}</div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="grp"><label for="address">Street Address<span class="req" ng-if="vm.cfg.address">*</span></label><input id="address" class="ctrl" ng-model="vm.f.address" ng-class="{err:vm.e.address}">
                            <div class="err-msg" ng-if="vm.e.address">{{vm.e.address}}</div>
                        </div>
                    </div>
                    <div class="row c3">
                        <div class="grp"><label for="city">City<span class="req" ng-if="vm.cfg.address">*</span></label><input id="city" class="ctrl" ng-model="vm.f.city" ng-class="{err:vm.e.city}">
                            <div class="err-msg" ng-if="vm.e.city">{{vm.e.city}}</div>
                        </div>
                        <div class="grp"><label for="state">State<span class="req" ng-if="vm.cfg.address">*</span></label><select id="state" class="ctrl" ng-model="vm.f.state" ng-class="{err:vm.e.state}">
                                <option value="">Select...</option>
                                <option>Alabama</option>
                                <option>Alaska</option>
                                <option>Arizona</option>
                                <option>Arkansas</option>
                                <option>California</option>
                                <option>Colorado</option>
                                <option>Connecticut</option>
                                <option>Delaware</option>
                                <option>Florida</option>
                                <option>Georgia</option>
                                <option>Hawaii</option>
                                <option>Idaho</option>
                                <option>Illinois</option>
                                <option>Indiana</option>
                                <option>Iowa</option>
                                <option>Kansas</option>
                                <option>Kentucky</option>
                                <option>Louisiana</option>
                                <option>Maine</option>
                                <option>Maryland</option>
                                <option>Massachusetts</option>
                                <option>Michigan</option>
                                <option>Minnesota</option>
                                <option>Mississippi</option>
                                <option>Missouri</option>
                                <option>Montana</option>
                                <option>Nebraska</option>
                                <option>Nevada</option>
                                <option>New Hampshire</option>
                                <option>New Jersey</option>
                                <option>New Mexico</option>
                                <option>New York</option>
                                <option>North Carolina</option>
                                <option>North Dakota</option>
                                <option>Ohio</option>
                                <option>Oklahoma</option>
                                <option>Oregon</option>
                                <option>Pennsylvania</option>
                                <option>Rhode Island</option>
                                <option>South Carolina</option>
                                <option>South Dakota</option>
                                <option>Tennessee</option>
                                <option>Texas</option>
                                <option>Utah</option>
                                <option>Vermont</option>
                                <option>Virginia</option>
                                <option>Washington</option>
                                <option>West Virginia</option>
                                <option>Wisconsin</option>
                                <option>Wyoming</option>
                            </select>
                            <div class="err-msg" ng-if="vm.e.state">{{vm.e.state}}</div>
                        </div>
                        <div class="grp"><label for="zip">Zip<span class="req" ng-if="vm.cfg.address">*</span></label><input id="zip" class="ctrl" ng-model="vm.f.zip" ng-class="{err:vm.e.zip}" placeholder="XXXXX" maxlength="5">
                            <div class="err-msg" ng-if="vm.e.zip">{{vm.e.zip}}</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="collapse sec" ng-class="{'hide':vm.f.quick}">
                <div class="inner">
                    <div class="sec-head"><span>Emergency Contact</span></div>
                    <div class="row c2">
                        <div class="grp"><label for="emFirst">First Name<span class="req" ng-if="vm.cfg.emergency&&!vm.f.homeless">*</span></label><input id="emFirst" class="ctrl" ng-model="vm.f.emFirst" ng-class="{err:vm.e.emFirst}">
                            <div class="err-msg" ng-if="vm.e.emFirst">{{vm.e.emFirst}}</div>
                        </div>
                        <div class="grp"><label for="emLast">Last Name<span class="req" ng-if="vm.cfg.emergency&&!vm.f.homeless">*</span></label><input id="emLast" class="ctrl" ng-model="vm.f.emLast" ng-class="{err:vm.e.emLast}">
                            <div class="err-msg" ng-if="vm.e.emLast">{{vm.e.emLast}}</div>
                        </div>
                    </div>
                    <div class="row c3">
                        <div class="grp"><label for="emType">Type<span class="req" ng-if="vm.cfg.emergency&&!vm.f.homeless">*</span></label><select id="emType" class="ctrl" ng-model="vm.f.emType" ng-class="{err:vm.e.emType}">
                                <option value="">Select...</option>
                                <option>Family</option>
                                <option>Medical</option>
                                <option>Custom</option>
                            </select>
                            <div class="err-msg" ng-if="vm.e.emType">{{vm.e.emType}}</div>
                        </div>
                        <div class="grp"><label for="emRel">Relationship<span class="req" ng-if="vm.cfg.emergency&&!vm.f.homeless">*</span></label><select id="emRel" class="ctrl" ng-model="vm.f.emRel" ng-class="{err:vm.e.emRel}">
                                <option value="">Select...</option>
                                <optgroup label="Family">
                                    <option>Biological Parent 1</option>
                                    <option>Biological Parent 2</option>
                                    <option>Adoptive Parent 1</option>
                                    <option>Adoptive Parent 2</option>
                                    <option>Spouse</option>
                                    <option>Step Parent 1</option>
                                    <option>Step Parent 2</option>
                                    <option>Foster Parent 1</option>
                                    <option>Foster Parent 2</option>
                                    <option>Guardian 1</option>
                                    <option>Guardian 2</option>
                                <optgroup label="Medical">
                                    <option>Primary Care Physician</option>
                                    <option>Outpatient Psychiatrist</option>
                                    <option>Outpatient Therapist</option>
                                    <option>School Contact</option>
                                    <option>SASS Worker</option>
                                    <option>Pharmacy</option>
                                <optgroup label="Custom">
                                    <option>New Custom</option>
                            </select>
                            <div class="err-msg" ng-if="vm.e.emRel">{{vm.e.emRel}}</div>
                        </div>
                        <div class="grp"><label for="emPhone">Phone<span class="req" ng-if="vm.cfg.emergency&&!vm.f.homeless">*</span></label><input id="emPhone" class="ctrl" ng-model="vm.f.emPhone" ng-class="{err:vm.e.emPhone}" placeholder="(XXX) XXX-XXXX">
                            <div class="err-msg" ng-if="vm.e.emPhone">{{vm.e.emPhone}}</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="collapse sec" ng-class="{'hide':vm.f.quick}">
                <div class="inner">
                    <div class="sec-head"><span>Financial/Household</span></div>
                    <div class="row c3">
                        <div class="grp"><label for="familySize">Family Size<span class="req" ng-if="vm.cfg.family">*</span></label><input id="familySize" type="number" class="ctrl" ng-model="vm.f.familySize" ng-class="{err:vm.e.familySize}" min="1">
                            <div class="err-msg" ng-if="vm.e.familySize">{{vm.e.familySize}}</div>
                        </div>
                        <div class="grp"><label for="employment">Employment<span class="req" ng-if="vm.cfg.employment">*</span></label><select id="employment" class="ctrl" ng-model="vm.f.employment" ng-class="{err:vm.e.employment}">
                                <option value="">Select...</option>
                                <option>Disabled</optiom>
                                <option>Employed Full-Time</optiom>
                                <option>Employed Part-Time</optiom>
                                <option>Homemaker</optiom>
                                <option>Retired</optiom>
                                <option>Self-Employed</optiom>
                                <option>Stay at home parent</optiom>
                                <option>Student Full-Time</optiom>
                                <option>Student Part-Time</optiom>
                                <option>Unemployed</optiom>
                                <option>Unknown</optiom>
                            </select>
                            <div class="err-msg" ng-if="vm.e.employment">{{vm.e.employment}}</div>
                        </div>
                        <div class="grp"><label for="income">Income Range<span class="req" ng-if="vm.cfg.income">*</span></label><select id="income" class="ctrl" ng-model="vm.f.income" ng-class="{err:vm.e.income}">
                                <option value="">Select...</option>
                                <option>$0-$24,999</option>
                                <option>$25,000-$49,999</option>
                                <option>$50,000-$74,999</option>
                                <option>$75,000-$99,999</option>
                                <option>$100,000+</option>
                                <option>Unknown</option>
                            </select>
                            <div class="err-msg" ng-if="vm.e.income">{{vm.e.income}}</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="sec">
                <div class="sec-head"><span>Chart Details</span></div>
                <div class="row c2">
                    <div class="grp"><label for="clinician">Principal Clinician<span class="req">*</span></label><select id="clinician" class="ctrl" ng-model="vm.f.clinician">
                            <option>Dr. Sarah Johnson</option>
                            <option>Dr. Michael Smith</option>
                            <option>Dr. Emily Williams</option>
                        </select></div>
                    <div class="grp"><label for="chartId">Chart ID<span class="req">*</span></label><input id="chartId" class="ctrl" ng-model="vm.f.chartId" placeholder="Auto-generated"></div>
                </div>
                <div class="row">
                    <div class="grp"><label for="team">Clinical Team</label><select id="team" class="ctrl" ng-model="vm.f.team">
                            <option value="">Select...</option>
                            <option>Team Alpha</option>
                            <option>Team Beta</option>
                            <option>Team Gamma</option>
                        </select></div>
                </div>
            </div>
        </div>
        <div class="m-foot"><button class="btn btn-sec" ng-click="vm.close()">Cancel</button><button class="btn btn-pri" ng-click="vm.save()">Create Chart</button></div>
    </dialog>
    <script>
        angular.module('chartApp', []).controller('ChartCtrl', ['$timeout', function ($t) {
            var vm = this;
            vm.cfg = { ssn: true, race: true, ethnicity: false, marital: false, disability: false, family: false, employment: true, income: false, email: true, phone: true, address: true, emergency: true };
            vm.f = {};
            vm.e = {};

            vm.reset = function () {
                vm.f = { firstName: '', lastName: '', name: '', dob: '', sex: '', gender: '', ssn: '', race: '', ethnicity: '', marital: '', disability: '', homeless: false, quick: true, email: '', phone: '', address: '', city: '', state: '', zip: '', emFirst: '', emLast: '', emPhone: '', emType: '', emRel: '', familySize: '', employment: '', income: '', clinician: 'Dr. Sarah Johnson', chartId: '0173', team: '' };
                vm.e = {}
            };

            vm.open = function () {
                vm.reset();
                var d = document.getElementById('dlg');
                d.classList.remove('animate-in');

                // Disable transitions on open
                var collapses = d.querySelectorAll('.collapse');
                collapses.forEach(function (el) { el.classList.add('no-transition'); });

                d.showModal();
                requestAnimationFrame(function () {
                    requestAnimationFrame(function () {
                        d.classList.add('animate-in');
                        // Re-enable transitions after render
                        collapses.forEach(function (el) { el.classList.remove('no-transition'); });
                    })
                })
            };

            vm.close = function () {
                var d = document.getElementById('dlg');
                d.classList.remove('animate-in');
                d.classList.add('closing');
                $t(function () { d.close(); d.classList.remove('closing') }, 200)
            };

            vm.save = function () {
                vm.e = {};
                if (!vm.f.firstName) vm.e.firstName = 'Required';
                if (!vm.f.lastName) vm.e.lastName = 'Required';
                if (!vm.f.name) vm.e.name = 'Required';
                if (!vm.f.dob) vm.e.dob = 'Required';
                if (!vm.f.sex) vm.e.sex = 'Required';
                if (!vm.f.gender) vm.e.gender = 'Required';
                if (!vm.f.quick) {
                    if (vm.cfg.ssn && !vm.f.ssn) vm.e.ssn = 'Required';
                    if (vm.cfg.race && !vm.f.race) vm.e.race = 'Required';
                    if (vm.cfg.ethnicity && !vm.f.ethnicity) vm.e.ethnicity = 'Required';
                    if (vm.cfg.marital && !vm.f.marital) vm.e.marital = 'Required';
                    if (vm.cfg.disability && !vm.f.disability) vm.e.disability = 'Required';
                    if (vm.cfg.address) {
                        if (!vm.f.address) vm.e.address = 'Required';
                        if (!vm.f.city) vm.e.city = 'Required';
                        if (!vm.f.state) vm.e.state = 'Required';
                        if (!vm.f.zip) vm.e.zip = 'Required'
                    }
                    if (!vm.f.homeless) {
                        if (vm.cfg.email && !vm.f.email) vm.e.email = 'Required';
                        if (vm.cfg.phone && !vm.f.phone) vm.e.phone = 'Required';
                        if (vm.cfg.emergency) {
                            if (!vm.f.emRel) vm.e.emRel = 'Required'
                        }
                    }
                    if (vm.cfg.family && !vm.f.familySize) vm.e.familySize = 'Required';
                    if (vm.cfg.employment && !vm.f.employment) vm.e.employment = 'Required';
                    if (vm.cfg.income && !vm.f.income) vm.e.income = 'Required'
                }
                if (!Object.keys(vm.e).length) {
                    alert('Chart created successfully!');
                    vm.close()
                } else $t(function () {
                    var el = document.querySelector('.err-msg');
                    if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' })
                }, 100)
            };

            vm.reset();
            document.getElementById('dlg').addEventListener('cancel', function (e) {
                e.preventDefault();
                vm.close()
            })
        }]);
    </script>
</body>

</html>
